# 技术文档

---
**重要！！！**

**编码规范**

1. **头文件一律使用小写命名。**
2. **结构体首字母大写，使用驼峰命名法。**
3. **变量首字母小写，使用驼峰命名法。**
4. **数组默认从 0 开始。**
5. **头文件使用宏保护防止头文件被重复包含。**
6. **写注释。**
7. **代码合理缩进。**
8. **空间及时释放，包括函数返回的指针所指向的地址**

---

## 概览

由于要实现多个复杂功能，所以要尽可能有层次地设计程序结构。

目前将项目自下而上分为定义层、变量层、核心层、用户层、交互层。

各个层包含若干模块。模块是功能完善的封装好的头文件和源代码。

## 层级介绍

### 定义层

声明层包含程序所需结构体和数据结构的声明，这一部分不应有对象或变量。

主要模块：IntList、Date、House、ViewHouseMessage、RentRouseMessage、Admin、Middium、User。

### 变量层

变量层包含程序所需全局变量的定义及初始化。

主要模块：Head

### 核心层

程序的核心。程序的各种底层函数的声明和实现。

主要模块：Core

### 用户层

用户可使用的功能函数的声明和实现。

主要模块：UI

### 交互层

实现程序界面，与用户交互。接受指令，调用函数。


## 模块介绍

### IntList


```C
/*intlist.h*/

#include <stdbool.h>

// int 类型单项链表节点
struct IntListNode{
    int value; //值
    struct * ListNode nxt; //下一个节点地址
}

// int 类型单项链表
struct IntList{
    struct IntListNode * head; // 首节点
    int cnt; //节点个数
}

// 链表初始化
void init(struct IntList * list);

// 获得元素个数并返回
int getCnt(struct IntList * list);

// 查询是否出现某个值
bool findValue(struct IntList * list, int w)；

// 将链表转为 int 数组，返回数组首地址
int * IntListToIntArray(struct IntList * list);

// 将 int 数组转为链表，返回新的链表
struct IntList IntArrayToIntList(int * array);

// 链表头部插入节点，返回新的链表
struct IntList addHead(struct IntList * list, int w);

// 链表尾部插入节点，返回新的链表
struct IntList addTail(struct IntList * list, int w);

// 在特定节点后插入节点，返回新的链表
struct IntList addNode(struct IntList * list, struct IntListNode * node, int w);

// 删除链表头部节点，返回新的链表
struct IntList delHead(struct IntList * list, int w);

// 删除链表尾部节点，返回新的链表
struct IntList delTail(struct IntList * list, int w);

// 删除特定节点后节点，返回新的链表
struct IntList delNode(struct IntList * list, struct IntListNode * node);
```

### Date

```C
/*date.h*/

// 日期结构体
struct Date{
    int year, month, day;
}
// 比较两个日期的大小，大于返回大于 0 的数，小于返回小于 0 的数，等于返回 0
int cmpDate(struct Date a, struct Date b);

// 计算日期相差天数，b-a。
int subDate(struct Date a, struct Date b);
```

## House

```C
/*house.h*/

struct HouseListNode{
    struct House * data;
    struct HouseListNode * nxt;
}

struct HouseList{
    struct HouseListNode * head;
    int cnt;
}

// 朝向集合
struct DirectionType{
    char * discrebe;
    struct HouseList list;
}

struct 

//房源
struct House{
    int id; //房源编号
    int price; //租金
    int S; //面积
    char * introduce; //房屋介绍
    char * address; //房源地址
    char * type; //房型
    struct Date buildDate; //建造日期
    struct DirectionType Direction； //房屋朝向
    int decorationLevel; //装修程度(0-100)
}
```

### ViewHouseMessage

```C
/*viewhousemessage.h*/

//看房信息结构体
struct ViewHouseMessage{
    int ID;
    int userID, houseID;
}
```

### 
struct admin{
    int id, password;
}

struct middium{
    int id, password;
}

## user.h

struct user{
    int id, password;
    ListNode * req;
    ListNode * buy;
}

## head.h

struct User * user;
struct House * house;

## core.h

User* addUser()



## admin.h

void cgname();


## customer.h



## middium.h



## menu.h

## file.h

## 